<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Configuration Wizard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .wizard-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            max-width: 600px;
            width: 100%;
            overflow: hidden;
        }
        .wizard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .wizard-header h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .progress-step {
            flex: 1;
            height: 4px;
            background: rgba(255,255,255,0.3);
            margin: 0 5px;
            border-radius: 2px;
            transition: background 0.3s;
        }
        .progress-step.active {
            background: white;
        }
        .wizard-body {
            padding: 40px;
        }
        .wizard-step {
            display: none;
        }
        .wizard-step.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .step-title {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
            font-size: 14px;
        }
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 10px;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .btn-secondary {
            background: #f0f0f0;
            color: #666;
        }
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        .btn-default {
            background: #4caf50;
            color: white;
            width: 100%;
            margin-bottom: 20px;
        }
        .btn-default:hover {
            background: #45a049;
        }
        .json-output {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .copy-button {
            margin-top: 15px;
            background: #2196F3;
            color: white;
            width: 100%;
        }
        .copy-button:hover {
            background: #0b7dda;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="wizard-container">
        <div class="wizard-header">
            <h1>üöÄ Job Configuration Wizard</h1>
            <p>Configure your Ollama inference job</p>
            <div class="progress-bar">
                <div class="progress-step active" data-step="1"></div>
                <div class="progress-step" data-step="2"></div>
                <div class="progress-step" data-step="3"></div>
                <div class="progress-step" data-step="4"></div>
            </div>
        </div>
        
        <div class="wizard-body">
            <!-- Step 1: Job Name -->
            <div class="wizard-step active" data-step="1">
                <h2 class="step-title">Step 1: Job Identification</h2>
                <button class="btn-default" onclick="useDefaults()">Use Default Configuration</button>
                <div class="form-group">
                    <label for="jobName">Job Name</label>
                    <input type="text" id="jobName" value="ollama_inference_job" placeholder="Enter job name">
                </div>
            </div>

            <!-- Step 2: Infrastructure -->
            <div class="wizard-step" data-step="2">
                <h2 class="step-title">Step 2: Infrastructure Settings</h2>
                <div class="form-group">
                    <label for="partition">Partition</label>
                    <select id="partition">
                        <option value="cpu">CPU</option>
                        <option value="gpu" selected>GPU</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="account">Account</label>
                    <input type="text" id="account" value="p200981" placeholder="Account ID">
                </div>
                <div class="form-group">
                    <label for="nodes">Number of Nodes</label>
                    <input type="number" id="nodes" value="1" min="1">
                </div>
                <div class="form-group">
                    <label for="memory">Memory (GB)</label>
                    <input type="number" id="memory" value="64" min="1">
                </div>
                <div class="form-group">
                    <label for="time">Time Limit (HH:MM:SS)</label>
                    <input type="text" id="time" value="00:05:00" placeholder="00:05:00">
                </div>
            </div>

            <!-- Step 3: Service Configuration -->
            <div class="wizard-step" data-step="3">
                <h2 class="step-title">Step 3: Service Configuration</h2>
                <div class="form-group">
                    <label for="serviceType">Service Type</label>
                    <select id="serviceType">
                        <option value="inference" selected>Inference</option>
                        <option value="training">Training</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="model">Model</label>
                    <input type="text" id="model" value="llama2" placeholder="Model name">
                </div>
                <div class="form-group">
                    <label for="precision">Precision</label>
                    <select id="precision">
                        <option value="fp16" selected>FP16</option>
                        <option value="fp32">FP32</option>
                        <option value="int8">INT8</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="nClients">Number of Clients</label>
                    <input type="number" id="nClients" value="2" min="1">
                </div>
                <div class="form-group">
                    <label for="nRequests">Requests per Client</label>
                    <input type="number" id="nRequests" value="5" min="1">
                </div>
            </div>

            <!-- Step 4: Review & Generate -->
            <div class="wizard-step" data-step="4">
                <h2 class="step-title">Step 4: Review & Generate</h2>
                <p style="margin-bottom: 20px; color: #666;">Review your configuration below:</p>
                <div class="json-output" id="jsonOutput"></div>
                <button class="copy-button" onclick="copyJSON()">üìã Copy JSON to Clipboard</button>
                <button class="copy-button" onclick="downloadJSON()">üíæ Download JSON File</button>
            </div>

            <!-- Navigation Buttons -->
            <div class="button-group">
                <button class="btn-secondary" id="prevBtn" onclick="changeStep(-1)">‚Üê Previous</button>
                <button class="btn-primary" id="nextBtn" onclick="changeStep(1)">Next ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 4;

        const defaults = {
            jobName: "ollama_inference_job",
            partition: "gpu",
            account: "p200981",
            nodes: 1,
            memory: 64,
            time: "00:05:00",
            serviceType: "inference",
            model: "llama2",
            precision: "fp16",
            nClients: 2,
            nRequests: 5
        };

        function useDefaults() {
            document.getElementById('jobName').value = defaults.jobName;
            document.getElementById('partition').value = defaults.partition;
            document.getElementById('account').value = defaults.account;
            document.getElementById('nodes').value = defaults.nodes;
            document.getElementById('memory').value = defaults.memory;
            document.getElementById('time').value = defaults.time;
            document.getElementById('serviceType').value = defaults.serviceType;
            document.getElementById('model').value = defaults.model;
            document.getElementById('precision').value = defaults.precision;
            document.getElementById('nClients').value = defaults.nClients;
            document.getElementById('nRequests').value = defaults.nRequests;
            alert('‚úì Default configuration loaded!');
        }

        function changeStep(direction) {
            const newStep = currentStep + direction;
            
            if (newStep < 1 || newStep > totalSteps) return;
            
            // Hide current step
            document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.remove('active');
            document.querySelector(`.progress-step[data-step="${currentStep}"]`).classList.remove('active');
            
            // Show new step
            currentStep = newStep;
            document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.add('active');
            document.querySelector(`.progress-step[data-step="${currentStep}"]`).classList.add('active');
            
            // Update buttons
            document.getElementById('prevBtn').style.display = currentStep === 1 ? 'none' : 'block';
            document.getElementById('nextBtn').textContent = currentStep === totalSteps ? 'Finish ‚úì' : 'Next ‚Üí';
            
            // Generate JSON on final step
            if (currentStep === totalSteps) {
                generateJSON();
            }
        }

        function generateJSON() {
            const config = {
                job: {
                    name: document.getElementById('jobName').value,
                    infrastructure: {
                        partition: document.getElementById('partition').value,
                        account: document.getElementById('account').value,
                        nodes: parseInt(document.getElementById('nodes').value),
                        mem_gb: parseInt(document.getElementById('memory').value),
                        time: document.getElementById('time').value
                    },
                    service: {
                        type: document.getElementById('serviceType').value,
                        model: document.getElementById('model').value,
                        precision: document.getElementById('precision').value,
                        n_clients: parseInt(document.getElementById('nClients').value),
                        n_requests_per_client: parseInt(document.getElementById('nRequests').value)
                    }
                }
            };
            
            document.getElementById('jsonOutput').textContent = JSON.stringify(config, null, 2);
        }

        function copyJSON() {
            const jsonText = document.getElementById('jsonOutput').textContent;
            navigator.clipboard.writeText(jsonText).then(() => {
                alert('‚úì JSON copied to clipboard!');
            });
        }

        function downloadJSON() {
            const jsonText = document.getElementById('jsonOutput').textContent;
            const blob = new Blob([jsonText], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'job_config.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Initialize
        document.getElementById('prevBtn').style.display = 'none';
    </script>
</body>
</html>
